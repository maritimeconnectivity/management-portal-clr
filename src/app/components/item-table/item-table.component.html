<div class="clr-form clr-form-horizontal">
    <div class="clr-form-horizontal clr-form-control clr-row"
        *ngFor="let menu of columnForMenu | keyvalue:sortColumnForMenu">
        <label class="clr-control-label clr-col-12 clr-col-md-2">{{menu.value.title}}</label>
        <div class="clr-control-container clr-col-md-10 clr-col-12"
            ng-reflect-ng-class="clr-col-md-10 clr-col-12">
            <div class="clr-input-wrapper">
                @if (item[menu.key]) {
                    @if (isTimestampFormat(menu.key)) {
                        <span clrinput="" type="string" ng-reflect-name="mrn" ng-reflect-required="true"
                            class="clr-input ng-untouched ng-pristine ng-invalid ng-star-inserted"
                            required="" aria-describedby="clr-form-control-1-helper"
                            [style.width.px]=400>{{convertTimeString(item[menu.key])}}</span>
                    } @else if(menu.key === 'serviceType'){
                        @if (item[menu.key].length > 0) {
                            @for (text of item[menu.key]; track text){
                                <span class="label label-light-blue">{{text}}</span>
                            }
                        } @else {
                            <button class="btn btn-sm btn-outline" disabled>No service type assigned</button>
                        }
                        
                    } @else if(menu.key === 'dataProductType'){
                        @if (item[menu.key].length > 0) {
                            @for (text of item[menu.key]; track text){
                                <span class="label label-blue">{{text}}</span>
                            }
                        } @else {
                            <button class="btn btn-sm btn-outline" disabled>No data product type assigned</button>
                        }
                        
                    } @else if(menu.key === 'instanceAsXml'){
                        <button class="btn btn-sm" (click)="openXmlDialog(item[menu.key])">View XML</button>
                    } @else if(menu.key === 'instanceAsDoc'){
                        <button class="btn btn-sm" (click)="downloadDocFile(item[menu.key])">Download file</button>
                    } @else {
                        <span clrinput="" type="string" ng-reflect-name="mrn" ng-reflect-required="true"
                            class="clr-input ng-untouched ng-pristine ng-invalid ng-star-inserted"
                            required="" aria-describedby="clr-form-control-1-helper"
                            [style.width.px]=400>{{item[menu.key]}}</span>
                    }
                } @else {
                    @if (menu.key === 'instanceAsXml'){
                        <button class="btn btn-sm btn-outline" disabled>No XML data available</button>
                    } @else if(menu.key === 'instanceAsDoc'){
                        <button class="btn btn-sm btn-outline" disabled>No document available</button>
                    } @else {
                        <span clrinput="" type="string" ng-reflect-name="mrn" ng-reflect-required="true"
                        class="clr-input ng-untouched ng-pristine ng-invalid ng-star-inserted"
                        required="" aria-describedby="clr-form-control-1-helper"
                        [style.width.px]=400></span>
                    }
                }
            </div>
        </div>
    </div>
    @if (showCertTables) {
        <div class="clr-form-horizontal clr-form-control clr-row">
            <label class="clr-control-label clr-col-12 clr-col-md-2">Active certificates</label>
            <div class="clr-col-lg-12 clr-col-md-8 clr-col-12">
                <app-cert-table context="active" [data]="activeCertificates" [serial]="serial" (onAdd)="openCertModal()" (onDownload)="clickDownloadBtn($event)" (onRevoke)="clickRevokeBtn($event)" />
            </div>
        </div>
        <div class="clr-form-horizontal clr-form-control clr-row">
            <label class="clr-control-label clr-col-12 clr-col-md-2">Revoked certificates</label>
            <div class="clr-col-lg-12 clr-col-md-8 clr-col-12">
                <app-cert-table context="revoked" [data]="revokedCertificates" />
            </div>
        </div>
    }

</div>